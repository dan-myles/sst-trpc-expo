{"dependencies":[{"name":"./XMLHttpRequest","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":13,"column":23},"end":{"line":13,"column":50}}],"key":"O+JY6tQeHsIWY50GgaFx/xvik0k="}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  'use strict';\n\n  var XMLHttpRequest = require(_dependencyMap[0], \"./XMLHttpRequest\");\n  var originalXHROpen = XMLHttpRequest.prototype.open;\n  var originalXHRSend = XMLHttpRequest.prototype.send;\n  var originalXHRSetRequestHeader = XMLHttpRequest.prototype.setRequestHeader;\n  var openCallback;\n  var sendCallback;\n  var requestHeaderCallback;\n  var headerReceivedCallback;\n  var responseCallback;\n  var isInterceptorEnabled = false;\n  var XHRInterceptor = {\n    setOpenCallback(callback) {\n      openCallback = callback;\n    },\n    setSendCallback(callback) {\n      sendCallback = callback;\n    },\n    setHeaderReceivedCallback(callback) {\n      headerReceivedCallback = callback;\n    },\n    setResponseCallback(callback) {\n      responseCallback = callback;\n    },\n    setRequestHeaderCallback(callback) {\n      requestHeaderCallback = callback;\n    },\n    isInterceptorEnabled() {\n      return isInterceptorEnabled;\n    },\n    enableInterception() {\n      if (isInterceptorEnabled) {\n        return;\n      }\n      XMLHttpRequest.prototype.open = function (method, url) {\n        if (openCallback) {\n          openCallback(method, url, this);\n        }\n        originalXHROpen.apply(this, arguments);\n      };\n      XMLHttpRequest.prototype.setRequestHeader = function (header, value) {\n        if (requestHeaderCallback) {\n          requestHeaderCallback(header, value, this);\n        }\n        originalXHRSetRequestHeader.apply(this, arguments);\n      };\n      XMLHttpRequest.prototype.send = function (data) {\n        if (sendCallback) {\n          sendCallback(data, this);\n        }\n        if (this.addEventListener) {\n          this.addEventListener('readystatechange', () => {\n            if (!isInterceptorEnabled) {\n              return;\n            }\n            if (this.readyState === this.HEADERS_RECEIVED) {\n              var contentTypeString = this.getResponseHeader('Content-Type');\n              var contentLengthString = this.getResponseHeader('Content-Length');\n              var _responseContentType, _responseSize;\n              if (contentTypeString) {\n                _responseContentType = contentTypeString.split(';')[0];\n              }\n              if (contentLengthString) {\n                _responseSize = parseInt(contentLengthString, 10);\n              }\n              if (headerReceivedCallback) {\n                headerReceivedCallback(_responseContentType, _responseSize, this.getAllResponseHeaders(), this);\n              }\n            }\n            if (this.readyState === this.DONE) {\n              if (responseCallback) {\n                responseCallback(this.status, this.timeout, this.response, this.responseURL, this.responseType, this);\n              }\n            }\n          }, false);\n        }\n        originalXHRSend.apply(this, arguments);\n      };\n      isInterceptorEnabled = true;\n    },\n    disableInterception() {\n      if (!isInterceptorEnabled) {\n        return;\n      }\n      isInterceptorEnabled = false;\n      XMLHttpRequest.prototype.send = originalXHRSend;\n      XMLHttpRequest.prototype.open = originalXHROpen;\n      XMLHttpRequest.prototype.setRequestHeader = originalXHRSetRequestHeader;\n      responseCallback = null;\n      openCallback = null;\n      sendCallback = null;\n      headerReceivedCallback = null;\n      requestHeaderCallback = null;\n    }\n  };\n  module.exports = XHRInterceptor;\n});","lineCount":99,"map":[[2,2,11,0],[2,14,11,12],[4,2,13,0],[4,6,13,6,"XMLHttpRequest"],[4,20,13,20],[4,23,13,23,"require"],[4,30,13,30],[4,31,13,30,"_dependencyMap"],[4,45,13,30],[4,68,13,49],[4,69,13,50],[5,2,15,0],[5,6,15,6,"originalXHROpen"],[5,21,15,21],[5,24,15,24,"XMLHttpRequest"],[5,38,15,38],[5,39,15,39,"prototype"],[5,48,15,48],[5,49,15,49,"open"],[5,53,15,53],[6,2,17,0],[6,6,17,6,"originalXHRSend"],[6,21,17,21],[6,24,17,24,"XMLHttpRequest"],[6,38,17,38],[6,39,17,39,"prototype"],[6,48,17,48],[6,49,17,49,"send"],[6,53,17,53],[7,2,19,0],[7,6,19,6,"originalXHRSetRequestHeader"],[7,33,19,33],[7,36,19,36,"XMLHttpRequest"],[7,50,19,50],[7,51,19,51,"prototype"],[7,60,19,60],[7,61,19,61,"setRequestHeader"],[7,77,19,77],[8,2,54,0],[8,6,54,4,"openCallback"],[8,18,54,51],[9,2,55,0],[9,6,55,4,"sendCallback"],[9,18,55,51],[10,2,56,0],[10,6,56,4,"requestHeaderCallback"],[10,27,56,69],[11,2,57,0],[11,6,57,4,"headerReceivedCallback"],[11,28,57,71],[12,2,58,0],[12,6,58,4,"responseCallback"],[12,22,58,59],[13,2,60,0],[13,6,60,4,"isInterceptorEnabled"],[13,26,60,24],[13,29,60,27],[13,34,60,32],[14,2,69,0],[14,6,69,6,"XHRInterceptor"],[14,20,69,20],[14,23,69,23],[15,4,73,2,"setOpenCallback"],[15,19,73,17,"setOpenCallback"],[15,20,73,18,"callback"],[15,28,73,54],[15,30,73,56],[16,6,74,4,"openCallback"],[16,18,74,16],[16,21,74,19,"callback"],[16,29,74,27],[17,4,75,2],[17,5,75,3],[18,4,80,2,"setSendCallback"],[18,19,80,17,"setSendCallback"],[18,20,80,18,"callback"],[18,28,80,54],[18,30,80,56],[19,6,81,4,"sendCallback"],[19,18,81,16],[19,21,81,19,"callback"],[19,29,81,27],[20,4,82,2],[20,5,82,3],[21,4,87,2,"setHeaderReceivedCallback"],[21,29,87,27,"setHeaderReceivedCallback"],[21,30,87,28,"callback"],[21,38,87,74],[21,40,87,76],[22,6,88,4,"headerReceivedCallback"],[22,28,88,26],[22,31,88,29,"callback"],[22,39,88,37],[23,4,89,2],[23,5,89,3],[24,4,94,2,"setResponseCallback"],[24,23,94,21,"setResponseCallback"],[24,24,94,22,"callback"],[24,32,94,62],[24,34,94,64],[25,6,95,4,"responseCallback"],[25,22,95,20],[25,25,95,23,"callback"],[25,33,95,31],[26,4,96,2],[26,5,96,3],[27,4,101,2,"setRequestHeaderCallback"],[27,28,101,26,"setRequestHeaderCallback"],[27,29,101,27,"callback"],[27,37,101,72],[27,39,101,74],[28,6,102,4,"requestHeaderCallback"],[28,27,102,25],[28,30,102,28,"callback"],[28,38,102,36],[29,4,103,2],[29,5,103,3],[30,4,105,2,"isInterceptorEnabled"],[30,24,105,22,"isInterceptorEnabled"],[30,25,105,22],[30,27,105,34],[31,6,106,4],[31,13,106,11,"isInterceptorEnabled"],[31,33,106,31],[32,4,107,2],[32,5,107,3],[33,4,109,2,"enableInterception"],[33,22,109,20,"enableInterception"],[33,23,109,20],[33,25,109,23],[34,6,110,4],[34,10,110,8,"isInterceptorEnabled"],[34,30,110,28],[34,32,110,30],[35,8,111,6],[36,6,112,4],[37,6,117,4,"XMLHttpRequest"],[37,20,117,18],[37,21,117,19,"prototype"],[37,30,117,28],[37,31,117,29,"open"],[37,35,117,33],[37,38,117,36],[37,48,117,46,"method"],[37,54,117,60],[37,56,117,62,"url"],[37,59,117,73],[37,61,117,75],[38,8,118,6],[38,12,118,10,"openCallback"],[38,24,118,22],[38,26,118,24],[39,10,119,8,"openCallback"],[39,22,119,20],[39,23,119,21,"method"],[39,29,119,27],[39,31,119,29,"url"],[39,34,119,32],[39,36,119,34],[39,40,119,38],[39,41,119,39],[40,8,120,6],[41,8,121,6,"originalXHROpen"],[41,23,121,21],[41,24,121,22,"apply"],[41,29,121,27],[41,30,121,28],[41,34,121,32],[41,36,121,34,"arguments"],[41,45,121,43],[41,46,121,44],[42,6,122,4],[42,7,122,5],[43,6,128,4,"XMLHttpRequest"],[43,20,128,18],[43,21,128,19,"prototype"],[43,30,128,28],[43,31,128,29,"setRequestHeader"],[43,47,128,45],[43,50,128,48],[43,60,129,6,"header"],[43,66,129,20],[43,68,130,6,"value"],[43,73,130,19],[43,75,131,6],[44,8,132,6],[44,12,132,10,"requestHeaderCallback"],[44,33,132,31],[44,35,132,33],[45,10,133,8,"requestHeaderCallback"],[45,31,133,29],[45,32,133,30,"header"],[45,38,133,36],[45,40,133,38,"value"],[45,45,133,43],[45,47,133,45],[45,51,133,49],[45,52,133,50],[46,8,134,6],[47,8,135,6,"originalXHRSetRequestHeader"],[47,35,135,33],[47,36,135,34,"apply"],[47,41,135,39],[47,42,135,40],[47,46,135,44],[47,48,135,46,"arguments"],[47,57,135,55],[47,58,135,56],[48,6,136,4],[48,7,136,5],[49,6,142,4,"XMLHttpRequest"],[49,20,142,18],[49,21,142,19,"prototype"],[49,30,142,28],[49,31,142,29,"send"],[49,35,142,33],[49,38,142,36],[49,48,142,46,"data"],[49,52,142,58],[49,54,142,60],[50,8,143,6],[50,12,143,10,"sendCallback"],[50,24,143,22],[50,26,143,24],[51,10,144,8,"sendCallback"],[51,22,144,20],[51,23,144,21,"data"],[51,27,144,25],[51,29,144,27],[51,33,144,31],[51,34,144,32],[52,8,145,6],[53,8,146,6],[53,12,146,10],[53,16,146,14],[53,17,146,15,"addEventListener"],[53,33,146,31],[53,35,146,33],[54,10,147,8],[54,14,147,12],[54,15,147,13,"addEventListener"],[54,31,147,29],[54,32,148,10],[54,50,148,28],[54,52,149,10],[54,58,149,16],[55,12,150,12],[55,16,150,16],[55,17,150,17,"isInterceptorEnabled"],[55,37,150,37],[55,39,150,39],[56,14,151,14],[57,12,152,12],[58,12,153,12],[58,16,153,16],[58,20,153,20],[58,21,153,21,"readyState"],[58,31,153,31],[58,36,153,36],[58,40,153,40],[58,41,153,41,"HEADERS_RECEIVED"],[58,57,153,57],[58,59,153,59],[59,14,154,14],[59,18,154,20,"contentTypeString"],[59,35,154,37],[59,38,154,40],[59,42,154,44],[59,43,154,45,"getResponseHeader"],[59,60,154,62],[59,61,154,63],[59,75,154,77],[59,76,154,78],[60,14,155,14],[60,18,155,20,"contentLengthString"],[60,37,155,39],[60,40,156,16],[60,44,156,20],[60,45,156,21,"getResponseHeader"],[60,62,156,38],[60,63,156,39],[60,79,156,55],[60,80,156,56],[61,14,157,14],[61,18,157,18,"responseContentType"],[61,38,157,37],[61,40,157,39,"responseSize"],[61,53,157,51],[62,14,158,14],[62,18,158,18,"contentTypeString"],[62,35,158,35],[62,37,158,37],[63,16,159,16,"responseContentType"],[63,36,159,35],[63,39,159,38,"contentTypeString"],[63,56,159,55],[63,57,159,56,"split"],[63,62,159,61],[63,63,159,62],[63,66,159,65],[63,67,159,66],[63,68,159,67],[63,69,159,68],[63,70,159,69],[64,14,160,14],[65,14,161,14],[65,18,161,18,"contentLengthString"],[65,37,161,37],[65,39,161,39],[66,16,162,16,"responseSize"],[66,29,162,28],[66,32,162,31,"parseInt"],[66,40,162,39],[66,41,162,40,"contentLengthString"],[66,60,162,59],[66,62,162,61],[66,64,162,63],[66,65,162,64],[67,14,163,14],[68,14,164,14],[68,18,164,18,"headerReceivedCallback"],[68,40,164,40],[68,42,164,42],[69,16,165,16,"headerReceivedCallback"],[69,38,165,38],[69,39,166,18,"responseContentType"],[69,59,166,37],[69,61,167,18,"responseSize"],[69,74,167,30],[69,76,168,18],[69,80,168,22],[69,81,168,23,"getAllResponseHeaders"],[69,102,168,44],[69,103,168,45],[69,104,168,46],[69,106,169,18],[69,110,170,16],[69,111,170,17],[70,14,171,14],[71,12,172,12],[72,12,173,12],[72,16,173,16],[72,20,173,20],[72,21,173,21,"readyState"],[72,31,173,31],[72,36,173,36],[72,40,173,40],[72,41,173,41,"DONE"],[72,45,173,45],[72,47,173,47],[73,14,174,14],[73,18,174,18,"responseCallback"],[73,34,174,34],[73,36,174,36],[74,16,175,16,"responseCallback"],[74,32,175,32],[74,33,176,18],[74,37,176,22],[74,38,176,23,"status"],[74,44,176,29],[74,46,177,18],[74,50,177,22],[74,51,177,23,"timeout"],[74,58,177,30],[74,60,178,18],[74,64,178,22],[74,65,178,23,"response"],[74,73,178,31],[74,75,179,18],[74,79,179,22],[74,80,179,23,"responseURL"],[74,91,179,34],[74,93,180,18],[74,97,180,22],[74,98,180,23,"responseType"],[74,110,180,35],[74,112,181,18],[74,116,182,16],[74,117,182,17],[75,14,183,14],[76,12,184,12],[77,10,185,10],[77,11,185,11],[77,13,186,10],[77,18,187,8],[77,19,187,9],[78,8,188,6],[79,8,189,6,"originalXHRSend"],[79,23,189,21],[79,24,189,22,"apply"],[79,29,189,27],[79,30,189,28],[79,34,189,32],[79,36,189,34,"arguments"],[79,45,189,43],[79,46,189,44],[80,6,190,4],[80,7,190,5],[81,6,191,4,"isInterceptorEnabled"],[81,26,191,24],[81,29,191,27],[81,33,191,31],[82,4,192,2],[82,5,192,3],[83,4,195,2,"disableInterception"],[83,23,195,21,"disableInterception"],[83,24,195,21],[83,26,195,24],[84,6,196,4],[84,10,196,8],[84,11,196,9,"isInterceptorEnabled"],[84,31,196,29],[84,33,196,31],[85,8,197,6],[86,6,198,4],[87,6,199,4,"isInterceptorEnabled"],[87,26,199,24],[87,29,199,27],[87,34,199,32],[88,6,201,4,"XMLHttpRequest"],[88,20,201,18],[88,21,201,19,"prototype"],[88,30,201,28],[88,31,201,29,"send"],[88,35,201,33],[88,38,201,36,"originalXHRSend"],[88,53,201,51],[89,6,203,4,"XMLHttpRequest"],[89,20,203,18],[89,21,203,19,"prototype"],[89,30,203,28],[89,31,203,29,"open"],[89,35,203,33],[89,38,203,36,"originalXHROpen"],[89,53,203,51],[90,6,205,4,"XMLHttpRequest"],[90,20,205,18],[90,21,205,19,"prototype"],[90,30,205,28],[90,31,205,29,"setRequestHeader"],[90,47,205,45],[90,50,205,48,"originalXHRSetRequestHeader"],[90,77,205,75],[91,6,206,4,"responseCallback"],[91,22,206,20],[91,25,206,23],[91,29,206,27],[92,6,207,4,"openCallback"],[92,18,207,16],[92,21,207,19],[92,25,207,23],[93,6,208,4,"sendCallback"],[93,18,208,16],[93,21,208,19],[93,25,208,23],[94,6,209,4,"headerReceivedCallback"],[94,28,209,26],[94,31,209,29],[94,35,209,33],[95,6,210,4,"requestHeaderCallback"],[95,27,210,25],[95,30,210,28],[95,34,210,32],[96,4,211,2],[97,2,212,0],[97,3,212,1],[98,2,214,0,"module"],[98,8,214,6],[98,9,214,7,"exports"],[98,16,214,14],[98,19,214,17,"XHRInterceptor"],[98,33,214,31],[99,0,214,32],[99,3]],"functionMap":{"names":["<global>","setOpenCallback","setSendCallback","setHeaderReceivedCallback","setResponseCallback","setRequestHeaderCallback","isInterceptorEnabled","enableInterception","XMLHttpRequest.prototype.open","XMLHttpRequest.prototype.setRequestHeader","XMLHttpRequest.prototype.send","addEventListener$argument_1","disableInterception"],"mappings":"AAA;ECwE;GDE;EEK;GFE;EGK;GHE;EIK;GJE;EKK;GLE;EME;GNE;EOE;oCCQ;KDK;gDEM;KFQ;oCGM;UCO;WDoC;KHK;GPE;EYG;GZgB"}},"type":"js/module"}]}