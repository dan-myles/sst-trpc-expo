{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":179,"column":0,"index":6005}}],"key":"7kvm5yrOpz4NYiDi6sn4qxa8DVQ="}},{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":179,"column":0,"index":6005}}],"key":"8I802z/QkQYw0PV6ZCqhBNDwn0Q="}},{"name":"@babel/runtime/helpers/classCallCheck","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":179,"column":0,"index":6005}}],"key":"ohGilxjVqjyE1GooDVDt9OYg9x0="}},{"name":"@babel/runtime/helpers/createClass","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":179,"column":0,"index":6005}}],"key":"V6GYoXnblvuuGHJNMy7MHyaunsU="}},{"name":"@trpc/server/observable","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":58,"index":58}}],"key":"I122979nMYhHcuaUZWanjRGzbec="}},{"name":"./utils.mjs","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":2,"column":0,"index":59},"end":{"line":2,"column":56,"index":115}}],"key":"XZqiGndSzUFgS+0ABF5nOFWZJRU="}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.WsConnection = void 0;\n  exports.backwardCompatibility = backwardCompatibility;\n  var _asyncToGenerator2 = _interopRequireDefault(require(_dependencyMap[1], \"@babel/runtime/helpers/asyncToGenerator\"));\n  var _classCallCheck2 = _interopRequireDefault(require(_dependencyMap[2], \"@babel/runtime/helpers/classCallCheck\"));\n  var _createClass2 = _interopRequireDefault(require(_dependencyMap[3], \"@babel/runtime/helpers/createClass\"));\n  var _observable = require(_dependencyMap[4], \"@trpc/server/observable\");\n  var _utils = require(_dependencyMap[5], \"./utils.mjs\");\n  function _define_property(obj, key, value) {\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n    return obj;\n  }\n  /**\n   * Opens a WebSocket connection asynchronously and returns a promise\n   * that resolves when the connection is successfully established.\n   * The promise rejects if an error occurs during the connection attempt.\n   */\n  function asyncWsOpen(ws) {\n    var _withResolvers = (0, _utils.withResolvers)(),\n      promise = _withResolvers.promise,\n      resolve = _withResolvers.resolve,\n      reject = _withResolvers.reject;\n    ws.addEventListener('open', () => {\n      ws.removeEventListener('error', reject);\n      resolve();\n    });\n    ws.addEventListener('error', reject);\n    return promise;\n  }\n  /**\n   * Sets up a periodic ping-pong mechanism to keep the WebSocket connection alive.\n   *\n   * - Sends \"PING\" messages at regular intervals defined by `intervalMs`.\n   * - If a \"PONG\" response is not received within the `pongTimeoutMs`, the WebSocket is closed.\n   * - The ping timer resets upon receiving any message to maintain activity.\n   * - Automatically starts the ping process when the WebSocket connection is opened.\n   * - Cleans up timers when the WebSocket is closed.\n   *\n   * @param ws - The WebSocket instance to manage.\n   * @param options - Configuration options for ping-pong intervals and timeouts.\n   */\n  function setupPingInterval(ws, _ref) {\n    var intervalMs = _ref.intervalMs,\n      pongTimeoutMs = _ref.pongTimeoutMs;\n    var pingTimeout;\n    var pongTimeout;\n    function start() {\n      pingTimeout = setTimeout(() => {\n        ws.send('PING');\n        pongTimeout = setTimeout(() => {\n          ws.close();\n        }, pongTimeoutMs);\n      }, intervalMs);\n    }\n    function reset() {\n      clearTimeout(pingTimeout);\n      start();\n    }\n    function pong() {\n      clearTimeout(pongTimeout);\n      reset();\n    }\n    ws.addEventListener('open', start);\n    ws.addEventListener('message', _ref2 => {\n      var data = _ref2.data;\n      clearTimeout(pingTimeout);\n      start();\n      if (data === 'PONG') {\n        pong();\n      }\n    });\n    ws.addEventListener('close', () => {\n      clearTimeout(pingTimeout);\n      clearTimeout(pongTimeout);\n    });\n  }\n  /**\n   * Manages a WebSocket connection with support for reconnection, keep-alive mechanisms,\n   * and observable state tracking.\n   */\n  var WsConnection = exports.WsConnection = /*#__PURE__*/function () {\n    function WsConnection(opts) {\n      (0, _classCallCheck2.default)(this, WsConnection);\n      _define_property(this, \"id\", ++WsConnection.connectCount);\n      _define_property(this, \"WebSocketPonyfill\", void 0);\n      _define_property(this, \"urlOptions\", void 0);\n      _define_property(this, \"keepAliveOpts\", void 0);\n      _define_property(this, \"wsObservable\", (0, _observable.behaviorSubject)(null));\n      /**\n      * Manages the WebSocket opening process, ensuring that only one open operation\n      * occurs at a time. Tracks the ongoing operation with `openPromise` to avoid\n      * redundant calls and ensure proper synchronization.\n      *\n      * Sets up the keep-alive mechanism and necessary event listeners for the connection.\n      *\n      * @returns A promise that resolves once the WebSocket connection is successfully opened.\n      */\n      _define_property(this, \"openPromise\", null);\n      this.WebSocketPonyfill = opts.WebSocketPonyfill ?? WebSocket;\n      if (!this.WebSocketPonyfill) {\n        throw new Error(\"No WebSocket implementation found - you probably don't want to use this on the server, but if you do you need to pass a `WebSocket`-ponyfill\");\n      }\n      this.urlOptions = opts.urlOptions;\n      this.keepAliveOpts = opts.keepAlive;\n    }\n    return (0, _createClass2.default)(WsConnection, [{\n      key: \"ws\",\n      get: function () {\n        return this.wsObservable.get();\n      },\n      set: function (ws) {\n        this.wsObservable.next(ws);\n      }\n      /**\n      * Checks if the WebSocket connection is open and ready to communicate.\n      */\n    }, {\n      key: \"isOpen\",\n      value: function isOpen() {\n        return !!this.ws && this.ws.readyState === this.WebSocketPonyfill.OPEN;\n      }\n      /**\n      * Checks if the WebSocket connection is closed or in the process of closing.\n      */\n    }, {\n      key: \"isClosed\",\n      value: function isClosed() {\n        return !!this.ws && (this.ws.readyState === this.WebSocketPonyfill.CLOSING || this.ws.readyState === this.WebSocketPonyfill.CLOSED);\n      }\n    }, {\n      key: \"open\",\n      value: function () {\n        var _open = (0, _asyncToGenerator2.default)(function* () {\n          if (this.openPromise) return this.openPromise;\n          this.id = ++WsConnection.connectCount;\n          var wsPromise = (0, _utils.prepareUrl)(this.urlOptions).then(url => new this.WebSocketPonyfill(url));\n          this.openPromise = wsPromise.then(asyncWsOpen);\n          this.ws = yield wsPromise;\n          // Setup ping listener\n          this.ws.addEventListener('message', function (_ref3) {\n            var data = _ref3.data;\n            if (data === 'PING') {\n              this.send('PONG');\n            }\n          });\n          if (this.keepAliveOpts.enabled) {\n            setupPingInterval(this.ws, this.keepAliveOpts);\n          }\n          this.ws.addEventListener('close', () => {\n            this.ws = null;\n          });\n          try {\n            yield this.openPromise;\n          } finally {\n            this.openPromise = null;\n          }\n        });\n        function open() {\n          return _open.apply(this, arguments);\n        }\n        return open;\n      }()\n      /**\n      * Closes the WebSocket connection gracefully.\n      * Waits for any ongoing open operation to complete before closing.\n      */\n    }, {\n      key: \"close\",\n      value: (function () {\n        var _close = (0, _asyncToGenerator2.default)(function* () {\n          try {\n            yield this.openPromise;\n          } finally {\n            this.ws?.close();\n          }\n        });\n        function close() {\n          return _close.apply(this, arguments);\n        }\n        return close;\n      }())\n    }]);\n  }();\n  _define_property(WsConnection, \"connectCount\", 0);\n  /**\n   * Provides a backward-compatible representation of the connection state.\n   */\n  function backwardCompatibility(connection) {\n    if (connection.isOpen()) {\n      return {\n        id: connection.id,\n        state: 'open',\n        ws: connection.ws\n      };\n    }\n    if (connection.isClosed()) {\n      return {\n        id: connection.id,\n        state: 'closed',\n        ws: connection.ws\n      };\n    }\n    if (!connection.ws) {\n      return null;\n    }\n    return {\n      id: connection.id,\n      state: 'connecting',\n      ws: connection.ws\n    };\n  }\n});","lineCount":225,"map":[[11,2,1,0],[11,6,1,0,"_observable"],[11,17,1,0],[11,20,1,0,"require"],[11,27,1,0],[11,28,1,0,"_dependencyMap"],[11,42,1,0],[12,2,2,0],[12,6,2,0,"_utils"],[12,12,2,0],[12,15,2,0,"require"],[12,22,2,0],[12,23,2,0,"_dependencyMap"],[12,37,2,0],[13,2,4,0],[13,11,4,9,"_define_property"],[13,27,4,25,"_define_property"],[13,28,4,26,"obj"],[13,31,4,29],[13,33,4,31,"key"],[13,36,4,34],[13,38,4,36,"value"],[13,43,4,41],[13,45,4,43],[14,4,5,4],[14,8,5,8,"key"],[14,11,5,11],[14,15,5,15,"obj"],[14,18,5,18],[14,20,5,20],[15,6,6,8,"Object"],[15,12,6,14],[15,13,6,15,"defineProperty"],[15,27,6,29],[15,28,6,30,"obj"],[15,31,6,33],[15,33,6,35,"key"],[15,36,6,38],[15,38,6,40],[16,8,7,12,"value"],[16,13,7,17],[16,15,7,19,"value"],[16,20,7,24],[17,8,8,12,"enumerable"],[17,18,8,22],[17,20,8,24],[17,24,8,28],[18,8,9,12,"configurable"],[18,20,9,24],[18,22,9,26],[18,26,9,30],[19,8,10,12,"writable"],[19,16,10,20],[19,18,10,22],[20,6,11,8],[20,7,11,9],[20,8,11,10],[21,4,12,4],[21,5,12,5],[21,11,12,11],[22,6,13,8,"obj"],[22,9,13,11],[22,10,13,12,"key"],[22,13,13,15],[22,14,13,16],[22,17,13,19,"value"],[22,22,13,24],[23,4,14,4],[24,4,15,4],[24,11,15,11,"obj"],[24,14,15,14],[25,2,16,0],[26,2,17,0],[27,0,18,0],[28,0,19,0],[29,0,20,0],[30,0,21,0],[31,2,21,4],[31,11,21,13,"asyncWsOpen"],[31,22,21,24,"asyncWsOpen"],[31,23,21,25,"ws"],[31,25,21,27],[31,27,21,29],[32,4,22,4],[32,8,22,4,"_withResolvers"],[32,22,22,4],[32,25,22,41],[32,29,22,41,"withResolvers"],[32,49,22,54],[32,51,22,55],[32,52,22,56],[33,6,22,12,"promise"],[33,13,22,19],[33,16,22,19,"_withResolvers"],[33,30,22,19],[33,31,22,12,"promise"],[33,38,22,19],[34,6,22,21,"resolve"],[34,13,22,28],[34,16,22,28,"_withResolvers"],[34,30,22,28],[34,31,22,21,"resolve"],[34,38,22,28],[35,6,22,30,"reject"],[35,12,22,36],[35,15,22,36,"_withResolvers"],[35,29,22,36],[35,30,22,30,"reject"],[35,36,22,36],[36,4,23,4,"ws"],[36,6,23,6],[36,7,23,7,"addEventListener"],[36,23,23,23],[36,24,23,24],[36,30,23,30],[36,32,23,32],[36,38,23,36],[37,6,24,8,"ws"],[37,8,24,10],[37,9,24,11,"removeEventListener"],[37,28,24,30],[37,29,24,31],[37,36,24,38],[37,38,24,40,"reject"],[37,44,24,46],[37,45,24,47],[38,6,25,8,"resolve"],[38,13,25,15],[38,14,25,16],[38,15,25,17],[39,4,26,4],[39,5,26,5],[39,6,26,6],[40,4,27,4,"ws"],[40,6,27,6],[40,7,27,7,"addEventListener"],[40,23,27,23],[40,24,27,24],[40,31,27,31],[40,33,27,33,"reject"],[40,39,27,39],[40,40,27,40],[41,4,28,4],[41,11,28,11,"promise"],[41,18,28,18],[42,2,29,0],[43,2,30,0],[44,0,31,0],[45,0,32,0],[46,0,33,0],[47,0,34,0],[48,0,35,0],[49,0,36,0],[50,0,37,0],[51,0,38,0],[52,0,39,0],[53,0,40,0],[54,0,41,0],[55,2,41,4],[55,11,41,13,"setupPingInterval"],[55,28,41,30,"setupPingInterval"],[55,29,41,31,"ws"],[55,31,41,33],[55,33,41,33,"_ref"],[55,37,41,33],[55,39,41,66],[56,4,41,66],[56,8,41,37,"intervalMs"],[56,18,41,47],[56,21,41,47,"_ref"],[56,25,41,47],[56,26,41,37,"intervalMs"],[56,36,41,47],[57,6,41,49,"pongTimeoutMs"],[57,19,41,62],[57,22,41,62,"_ref"],[57,26,41,62],[57,27,41,49,"pongTimeoutMs"],[57,40,41,62],[58,4,42,4],[58,8,42,8,"pingTimeout"],[58,19,42,19],[59,4,43,4],[59,8,43,8,"pongTimeout"],[59,19,43,19],[60,4,44,4],[60,13,44,13,"start"],[60,18,44,18,"start"],[60,19,44,18],[60,21,44,21],[61,6,45,8,"pingTimeout"],[61,17,45,19],[61,20,45,22,"setTimeout"],[61,30,45,32],[61,31,45,33],[61,37,45,37],[62,8,46,12,"ws"],[62,10,46,14],[62,11,46,15,"send"],[62,15,46,19],[62,16,46,20],[62,22,46,26],[62,23,46,27],[63,8,47,12,"pongTimeout"],[63,19,47,23],[63,22,47,26,"setTimeout"],[63,32,47,36],[63,33,47,37],[63,39,47,41],[64,10,48,16,"ws"],[64,12,48,18],[64,13,48,19,"close"],[64,18,48,24],[64,19,48,25],[64,20,48,26],[65,8,49,12],[65,9,49,13],[65,11,49,15,"pongTimeoutMs"],[65,24,49,28],[65,25,49,29],[66,6,50,8],[66,7,50,9],[66,9,50,11,"intervalMs"],[66,19,50,21],[66,20,50,22],[67,4,51,4],[68,4,52,4],[68,13,52,13,"reset"],[68,18,52,18,"reset"],[68,19,52,18],[68,21,52,21],[69,6,53,8,"clearTimeout"],[69,18,53,20],[69,19,53,21,"pingTimeout"],[69,30,53,32],[69,31,53,33],[70,6,54,8,"start"],[70,11,54,13],[70,12,54,14],[70,13,54,15],[71,4,55,4],[72,4,56,4],[72,13,56,13,"pong"],[72,17,56,17,"pong"],[72,18,56,17],[72,20,56,20],[73,6,57,8,"clearTimeout"],[73,18,57,20],[73,19,57,21,"pongTimeout"],[73,30,57,32],[73,31,57,33],[74,6,58,8,"reset"],[74,11,58,13],[74,12,58,14],[74,13,58,15],[75,4,59,4],[76,4,60,4,"ws"],[76,6,60,6],[76,7,60,7,"addEventListener"],[76,23,60,23],[76,24,60,24],[76,30,60,30],[76,32,60,32,"start"],[76,37,60,37],[76,38,60,38],[77,4,61,4,"ws"],[77,6,61,6],[77,7,61,7,"addEventListener"],[77,23,61,23],[77,24,61,24],[77,33,61,33],[77,35,61,35,"_ref2"],[77,40,61,35],[77,44,61,47],[78,6,61,47],[78,10,61,38,"data"],[78,14,61,42],[78,17,61,42,"_ref2"],[78,22,61,42],[78,23,61,38,"data"],[78,27,61,42],[79,6,62,8,"clearTimeout"],[79,18,62,20],[79,19,62,21,"pingTimeout"],[79,30,62,32],[79,31,62,33],[80,6,63,8,"start"],[80,11,63,13],[80,12,63,14],[80,13,63,15],[81,6,64,8],[81,10,64,12,"data"],[81,14,64,16],[81,19,64,21],[81,25,64,27],[81,27,64,29],[82,8,65,12,"pong"],[82,12,65,16],[82,13,65,17],[82,14,65,18],[83,6,66,8],[84,4,67,4],[84,5,67,5],[84,6,67,6],[85,4,68,4,"ws"],[85,6,68,6],[85,7,68,7,"addEventListener"],[85,23,68,23],[85,24,68,24],[85,31,68,31],[85,33,68,33],[85,39,68,37],[86,6,69,8,"clearTimeout"],[86,18,69,20],[86,19,69,21,"pingTimeout"],[86,30,69,32],[86,31,69,33],[87,6,70,8,"clearTimeout"],[87,18,70,20],[87,19,70,21,"pongTimeout"],[87,30,70,32],[87,31,70,33],[88,4,71,4],[88,5,71,5],[88,6,71,6],[89,2,72,0],[90,2,73,0],[91,0,74,0],[92,0,75,0],[93,0,76,0],[94,2,73,0],[94,6,76,10,"WsConnection"],[94,18,76,22],[94,21,76,22,"exports"],[94,28,76,22],[94,29,76,22,"WsConnection"],[94,41,76,22],[95,4,127,4],[95,13,127,4,"WsConnection"],[95,26,127,16,"opts"],[95,30,127,20],[95,32,127,21],[96,6,127,21],[96,10,127,21,"_classCallCheck2"],[96,26,127,21],[96,27,127,21,"default"],[96,34,127,21],[96,42,127,21,"WsConnection"],[96,54,127,21],[97,6,128,8,"_define_property"],[97,22,128,24],[97,23,128,25],[97,27,128,29],[97,29,128,31],[97,33,128,35],[97,35,128,37],[97,37,128,39,"WsConnection"],[97,49,128,51],[97,50,128,52,"connectCount"],[97,62,128,64],[97,63,128,65],[98,6,129,8,"_define_property"],[98,22,129,24],[98,23,129,25],[98,27,129,29],[98,29,129,31],[98,48,129,50],[98,50,129,52],[98,55,129,57],[98,56,129,58],[98,57,129,59],[99,6,130,8,"_define_property"],[99,22,130,24],[99,23,130,25],[99,27,130,29],[99,29,130,31],[99,41,130,43],[99,43,130,45],[99,48,130,50],[99,49,130,51],[99,50,130,52],[100,6,131,8,"_define_property"],[100,22,131,24],[100,23,131,25],[100,27,131,29],[100,29,131,31],[100,44,131,46],[100,46,131,48],[100,51,131,53],[100,52,131,54],[100,53,131,55],[101,6,132,8,"_define_property"],[101,22,132,24],[101,23,132,25],[101,27,132,29],[101,29,132,31],[101,43,132,45],[101,45,132,47],[101,49,132,47,"behaviorSubject"],[101,76,132,62],[101,78,132,63],[101,82,132,67],[101,83,132,68],[101,84,132,69],[102,6,133,8],[103,0,134,0],[104,0,135,0],[105,0,136,0],[106,0,137,0],[107,0,138,0],[108,0,139,0],[109,0,140,0],[110,0,141,0],[111,6,141,6,"_define_property"],[111,22,141,22],[111,23,141,23],[111,27,141,27],[111,29,141,29],[111,42,141,42],[111,44,141,44],[111,48,141,48],[111,49,141,49],[112,6,142,8],[112,10,142,12],[112,11,142,13,"WebSocketPonyfill"],[112,28,142,30],[112,31,142,33,"opts"],[112,35,142,37],[112,36,142,38,"WebSocketPonyfill"],[112,53,142,55],[112,57,142,59,"WebSocket"],[112,66,142,68],[113,6,143,8],[113,10,143,12],[113,11,143,13],[113,15,143,17],[113,16,143,18,"WebSocketPonyfill"],[113,33,143,35],[113,35,143,37],[114,8,144,12],[114,14,144,18],[114,18,144,22,"Error"],[114,23,144,27],[114,24,144,28],[114,166,144,170],[114,167,144,171],[115,6,145,8],[116,6,146,8],[116,10,146,12],[116,11,146,13,"urlOptions"],[116,21,146,23],[116,24,146,26,"opts"],[116,28,146,30],[116,29,146,31,"urlOptions"],[116,39,146,41],[117,6,147,8],[117,10,147,12],[117,11,147,13,"keepAliveOpts"],[117,24,147,26],[117,27,147,29,"opts"],[117,31,147,33],[117,32,147,34,"keepAlive"],[117,41,147,43],[118,4,148,4],[119,4,148,5],[119,15,148,5,"_createClass2"],[119,28,148,5],[119,29,148,5,"default"],[119,36,148,5],[119,38,148,5,"WsConnection"],[119,50,148,5],[120,6,148,5,"key"],[120,9,148,5],[121,6,148,5,"get"],[121,9,148,5],[121,11,77,4],[121,20,77,4,"get"],[121,21,77,4],[121,23,77,13],[122,8,78,8],[122,15,78,15],[122,19,78,19],[122,20,78,20,"wsObservable"],[122,32,78,32],[122,33,78,33,"get"],[122,36,78,36],[122,37,78,37],[122,38,78,38],[123,6,79,4],[123,7,79,5],[124,6,79,5,"set"],[124,9,79,5],[124,11,80,4],[124,20,80,4,"set"],[124,21,80,11,"ws"],[124,23,80,13],[124,25,80,15],[125,8,81,8],[125,12,81,12],[125,13,81,13,"wsObservable"],[125,25,81,25],[125,26,81,26,"next"],[125,30,81,30],[125,31,81,31,"ws"],[125,33,81,33],[125,34,81,34],[126,6,82,4],[127,6,83,4],[128,0,84,0],[129,0,85,0],[130,4,83,4],[131,6,83,4,"key"],[131,9,83,4],[132,6,83,4,"value"],[132,11,83,4],[132,13,85,6],[132,22,85,6,"isOpen"],[132,28,85,12,"isOpen"],[132,29,85,12],[132,31,85,15],[133,8,86,8],[133,15,86,15],[133,16,86,16],[133,17,86,17],[133,21,86,21],[133,22,86,22,"ws"],[133,24,86,24],[133,28,86,28],[133,32,86,32],[133,33,86,33,"ws"],[133,35,86,35],[133,36,86,36,"readyState"],[133,46,86,46],[133,51,86,51],[133,55,86,55],[133,56,86,56,"WebSocketPonyfill"],[133,73,86,73],[133,74,86,74,"OPEN"],[133,78,86,78],[134,6,87,4],[135,6,88,4],[136,0,89,0],[137,0,90,0],[138,4,88,4],[139,6,88,4,"key"],[139,9,88,4],[140,6,88,4,"value"],[140,11,88,4],[140,13,90,6],[140,22,90,6,"isClosed"],[140,30,90,14,"isClosed"],[140,31,90,14],[140,33,90,17],[141,8,91,8],[141,15,91,15],[141,16,91,16],[141,17,91,17],[141,21,91,21],[141,22,91,22,"ws"],[141,24,91,24],[141,29,91,29],[141,33,91,33],[141,34,91,34,"ws"],[141,36,91,36],[141,37,91,37,"readyState"],[141,47,91,47],[141,52,91,52],[141,56,91,56],[141,57,91,57,"WebSocketPonyfill"],[141,74,91,74],[141,75,91,75,"CLOSING"],[141,82,91,82],[141,86,91,86],[141,90,91,90],[141,91,91,91,"ws"],[141,93,91,93],[141,94,91,94,"readyState"],[141,104,91,104],[141,109,91,109],[141,113,91,113],[141,114,91,114,"WebSocketPonyfill"],[141,131,91,131],[141,132,91,132,"CLOSED"],[141,138,91,138],[141,139,91,139],[142,6,92,4],[143,4,92,5],[144,6,92,5,"key"],[144,9,92,5],[145,6,92,5,"value"],[145,11,92,5],[146,8,92,5],[146,12,92,5,"_open"],[146,17,92,5],[146,24,92,5,"_asyncToGenerator2"],[146,42,92,5],[146,43,92,5,"default"],[146,50,92,5],[146,52,93,4],[146,65,93,17],[147,10,94,8],[147,14,94,12],[147,18,94,16],[147,19,94,17,"openPromise"],[147,30,94,28],[147,32,94,30],[147,39,94,37],[147,43,94,41],[147,44,94,42,"openPromise"],[147,55,94,53],[148,10,95,8],[148,14,95,12],[148,15,95,13,"id"],[148,17,95,15],[148,20,95,18],[148,22,95,20,"WsConnection"],[148,34,95,32],[148,35,95,33,"connectCount"],[148,47,95,45],[149,10,96,8],[149,14,96,14,"wsPromise"],[149,23,96,23],[149,26,96,26],[149,30,96,26,"prepareUrl"],[149,47,96,36],[149,49,96,37],[149,53,96,41],[149,54,96,42,"urlOptions"],[149,64,96,52],[149,65,96,53],[149,66,96,54,"then"],[149,70,96,58],[149,71,96,60,"url"],[149,74,96,63],[149,78,96,66],[149,82,96,70],[149,86,96,74],[149,87,96,75,"WebSocketPonyfill"],[149,104,96,92],[149,105,96,93,"url"],[149,108,96,96],[149,109,96,97],[149,110,96,98],[150,10,97,8],[150,14,97,12],[150,15,97,13,"openPromise"],[150,26,97,24],[150,29,97,27,"wsPromise"],[150,38,97,36],[150,39,97,37,"then"],[150,43,97,41],[150,44,97,42,"asyncWsOpen"],[150,55,97,53],[150,56,97,54],[151,10,98,8],[151,14,98,12],[151,15,98,13,"ws"],[151,17,98,15],[151,26,98,24,"wsPromise"],[151,35,98,33],[152,10,99,8],[153,10,100,8],[153,14,100,12],[153,15,100,13,"ws"],[153,17,100,15],[153,18,100,16,"addEventListener"],[153,34,100,32],[153,35,100,33],[153,44,100,42],[153,46,100,44],[153,56,100,44,"_ref3"],[153,61,100,44],[153,63,100,63],[154,12,100,63],[154,16,100,55,"data"],[154,20,100,59],[154,23,100,59,"_ref3"],[154,28,100,59],[154,29,100,55,"data"],[154,33,100,59],[155,12,101,12],[155,16,101,16,"data"],[155,20,101,20],[155,25,101,25],[155,31,101,31],[155,33,101,33],[156,14,102,16],[156,18,102,20],[156,19,102,21,"send"],[156,23,102,25],[156,24,102,26],[156,30,102,32],[156,31,102,33],[157,12,103,12],[158,10,104,8],[158,11,104,9],[158,12,104,10],[159,10,105,8],[159,14,105,12],[159,18,105,16],[159,19,105,17,"keepAliveOpts"],[159,32,105,30],[159,33,105,31,"enabled"],[159,40,105,38],[159,42,105,40],[160,12,106,12,"setupPingInterval"],[160,29,106,29],[160,30,106,30],[160,34,106,34],[160,35,106,35,"ws"],[160,37,106,37],[160,39,106,39],[160,43,106,43],[160,44,106,44,"keepAliveOpts"],[160,57,106,57],[160,58,106,58],[161,10,107,8],[162,10,108,8],[162,14,108,12],[162,15,108,13,"ws"],[162,17,108,15],[162,18,108,16,"addEventListener"],[162,34,108,32],[162,35,108,33],[162,42,108,40],[162,44,108,42],[162,50,108,46],[163,12,109,12],[163,16,109,16],[163,17,109,17,"ws"],[163,19,109,19],[163,22,109,22],[163,26,109,26],[164,10,110,8],[164,11,110,9],[164,12,110,10],[165,10,111,8],[165,14,111,12],[166,12,112,12],[166,18,112,18],[166,22,112,22],[166,23,112,23,"openPromise"],[166,34,112,34],[167,10,113,8],[167,11,113,9],[167,20,113,17],[168,12,114,12],[168,16,114,16],[168,17,114,17,"openPromise"],[168,28,114,28],[168,31,114,31],[168,35,114,35],[169,10,115,8],[170,8,116,4],[170,9,116,5],[171,8,116,5],[171,17,93,10,"open"],[171,21,93,14,"open"],[171,22,93,14],[172,10,93,14],[172,17,93,14,"_open"],[172,22,93,14],[172,23,93,14,"apply"],[172,28,93,14],[172,35,93,14,"arguments"],[172,44,93,14],[173,8,93,14],[174,8,93,14],[174,15,93,10,"open"],[174,19,93,14],[175,6,93,14],[176,6,117,4],[177,0,118,0],[178,0,119,0],[179,0,120,0],[180,4,117,4],[181,6,117,4,"key"],[181,9,117,4],[182,6,117,4,"value"],[182,11,117,4],[183,8,117,4],[183,12,117,4,"_close"],[183,18,117,4],[183,25,117,4,"_asyncToGenerator2"],[183,43,117,4],[183,44,117,4,"default"],[183,51,117,4],[183,53,120,6],[183,66,120,20],[184,10,121,8],[184,14,121,12],[185,12,122,12],[185,18,122,18],[185,22,122,22],[185,23,122,23,"openPromise"],[185,34,122,34],[186,10,123,8],[186,11,123,9],[186,20,123,17],[187,12,124,12],[187,16,124,16],[187,17,124,17,"ws"],[187,19,124,19],[187,21,124,21,"close"],[187,26,124,26],[187,27,124,27],[187,28,124,28],[188,10,125,8],[189,8,126,4],[189,9,126,5],[190,8,126,5],[190,17,120,12,"close"],[190,22,120,17,"close"],[190,23,120,17],[191,10,120,17],[191,17,120,17,"_close"],[191,23,120,17],[191,24,120,17,"apply"],[191,29,120,17],[191,36,120,17,"arguments"],[191,45,120,17],[192,8,120,17],[193,8,120,17],[193,15,120,12,"close"],[193,20,120,17],[194,6,120,17],[195,4,120,17],[196,2,120,17],[197,2,150,0,"_define_property"],[197,18,150,16],[197,19,150,17,"WsConnection"],[197,31,150,29],[197,33,150,31],[197,47,150,45],[197,49,150,47],[197,50,150,48],[197,51,150,49],[198,2,151,0],[199,0,152,0],[200,0,153,0],[201,2,153,4],[201,11,153,13,"backwardCompatibility"],[201,32,153,34,"backwardCompatibility"],[201,33,153,35,"connection"],[201,43,153,45],[201,45,153,47],[202,4,154,4],[202,8,154,8,"connection"],[202,18,154,18],[202,19,154,19,"isOpen"],[202,25,154,25],[202,26,154,26],[202,27,154,27],[202,29,154,29],[203,6,155,8],[203,13,155,15],[204,8,156,12,"id"],[204,10,156,14],[204,12,156,16,"connection"],[204,22,156,26],[204,23,156,27,"id"],[204,25,156,29],[205,8,157,12,"state"],[205,13,157,17],[205,15,157,19],[205,21,157,25],[206,8,158,12,"ws"],[206,10,158,14],[206,12,158,16,"connection"],[206,22,158,26],[206,23,158,27,"ws"],[207,6,159,8],[207,7,159,9],[208,4,160,4],[209,4,161,4],[209,8,161,8,"connection"],[209,18,161,18],[209,19,161,19,"isClosed"],[209,27,161,27],[209,28,161,28],[209,29,161,29],[209,31,161,31],[210,6,162,8],[210,13,162,15],[211,8,163,12,"id"],[211,10,163,14],[211,12,163,16,"connection"],[211,22,163,26],[211,23,163,27,"id"],[211,25,163,29],[212,8,164,12,"state"],[212,13,164,17],[212,15,164,19],[212,23,164,27],[213,8,165,12,"ws"],[213,10,165,14],[213,12,165,16,"connection"],[213,22,165,26],[213,23,165,27,"ws"],[214,6,166,8],[214,7,166,9],[215,4,167,4],[216,4,168,4],[216,8,168,8],[216,9,168,9,"connection"],[216,19,168,19],[216,20,168,20,"ws"],[216,22,168,22],[216,24,168,24],[217,6,169,8],[217,13,169,15],[217,17,169,19],[218,4,170,4],[219,4,171,4],[219,11,171,11],[220,6,172,8,"id"],[220,8,172,10],[220,10,172,12,"connection"],[220,20,172,22],[220,21,172,23,"id"],[220,23,172,25],[221,6,173,8,"state"],[221,11,173,13],[221,13,173,15],[221,25,173,27],[222,6,174,8,"ws"],[222,8,174,10],[222,10,174,12,"connection"],[222,20,174,22],[222,21,174,23,"ws"],[223,4,175,4],[223,5,175,5],[224,2,176,0],[225,0,176,1],[225,3]],"functionMap":{"names":["<global>","_define_property","asyncWsOpen","ws.addEventListener$argument_1","setupPingInterval","start","setTimeout$argument_0","reset","pong","WsConnection","WsConnection#get__ws","WsConnection#set__ws","WsConnection#isOpen","WsConnection#isClosed","WsConnection#open","prepareUrl.then$argument_0","WsConnection#close","WsConnection#constructor","backwardCompatibility"],"mappings":"AAA;ACG;CDY;IEK;gCCE;KDG;CFG;IIY;ICG;iCCC;SDK;KDC;IGC;KHG;IIC;KJG;mCDE;KCM;iCDC;KCG;CJC;ISI;ICC;KDE;IEC;KFE;MGG;KHE;MIG;KJE;IKC;2DCG,sCD;4CXI;SWI;0CXI;SWE;KLM;MOI;KPM;IQC;KRqB;CTC;IkBI;ClBuB"}},"type":"js/module"}]}