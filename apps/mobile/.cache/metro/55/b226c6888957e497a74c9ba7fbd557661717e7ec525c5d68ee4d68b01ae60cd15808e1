{"dependencies":[{"name":"./roundToDecimalPlaces","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":4,"column":29,"index":137},"end":{"line":4,"column":62,"index":170}}],"key":"Zmd7VLEctGPpz4wJaRwYFnXk2Wc="}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.JSFPSMonitor = void 0;\n  var roundToDecimalPlaces_1 = require(_dependencyMap[0], \"./roundToDecimalPlaces\");\n  /**\n   * Can be used to monitor JS thread performance\n   * Use startTracking() and stopAndGetData() to start and stop tracking\n   */\n  var JSFPSMonitor = /** @class */function () {\n    function JSFPSMonitor() {\n      var _this = this;\n      this.startTime = 0;\n      this.frameCount = 0;\n      this.timeWindow = {\n        frameCount: 0,\n        startTime: 0\n      };\n      this.minFPS = Number.MAX_SAFE_INTEGER;\n      this.maxFPS = 0;\n      this.averageFPS = 0;\n      this.clearAnimationNumber = 0;\n      this.updateLoopCompute = function () {\n        _this.frameCount++;\n        var elapsedTime = (Date.now() - _this.startTime) / 1000;\n        _this.averageFPS = elapsedTime > 0 ? _this.frameCount / elapsedTime : 0;\n        _this.timeWindow.frameCount++;\n        var timeWindowElapsedTime = (Date.now() - _this.timeWindow.startTime) / 1000;\n        if (timeWindowElapsedTime >= 1) {\n          var timeWindowAverageFPS = _this.timeWindow.frameCount / timeWindowElapsedTime;\n          _this.minFPS = Math.min(_this.minFPS, timeWindowAverageFPS);\n          _this.maxFPS = Math.max(_this.maxFPS, timeWindowAverageFPS);\n          _this.timeWindow.frameCount = 0;\n          _this.timeWindow.startTime = Date.now();\n        }\n        _this.measureLoop();\n      };\n    }\n    JSFPSMonitor.prototype.measureLoop = function () {\n      // This looks weird but I'm avoiding a new closure\n      this.clearAnimationNumber = requestAnimationFrame(this.updateLoopCompute);\n    };\n    JSFPSMonitor.prototype.startTracking = function () {\n      if (this.startTime !== 0) {\n        throw new Error(\"This FPS Monitor has already been run, please create a new instance\");\n      }\n      this.startTime = Date.now();\n      this.timeWindow.startTime = Date.now();\n      this.measureLoop();\n    };\n    JSFPSMonitor.prototype.stopAndGetData = function () {\n      cancelAnimationFrame(this.clearAnimationNumber);\n      if (this.minFPS === Number.MAX_SAFE_INTEGER) {\n        this.minFPS = this.averageFPS;\n        this.maxFPS = this.averageFPS;\n      }\n      return {\n        minFPS: (0, roundToDecimalPlaces_1.roundToDecimalPlaces)(this.minFPS, 1),\n        maxFPS: (0, roundToDecimalPlaces_1.roundToDecimalPlaces)(this.maxFPS, 1),\n        averageFPS: (0, roundToDecimalPlaces_1.roundToDecimalPlaces)(this.averageFPS, 1)\n      };\n    };\n    return JSFPSMonitor;\n  }();\n  exports.JSFPSMonitor = JSFPSMonitor;\n});","lineCount":69,"map":[[2,2,1,0],[2,14,1,12],[4,2,2,0,"Object"],[4,8,2,6],[4,9,2,7,"defineProperty"],[4,23,2,21],[4,24,2,22,"exports"],[4,31,2,29],[4,33,2,31],[4,45,2,43],[4,47,2,45],[5,4,2,47,"value"],[5,9,2,52],[5,11,2,54],[6,2,2,59],[6,3,2,60],[6,4,2,61],[7,2,3,0,"exports"],[7,9,3,7],[7,10,3,8,"JSFPSMonitor"],[7,22,3,20],[7,25,3,23],[7,30,3,28],[7,31,3,29],[8,2,4,0],[8,6,4,4,"roundToDecimalPlaces_1"],[8,28,4,26],[8,31,4,29,"require"],[8,38,4,36],[8,39,4,36,"_dependencyMap"],[8,53,4,36],[8,82,4,61],[8,83,4,62],[9,2,5,0],[10,0,6,0],[11,0,7,0],[12,0,8,0],[13,2,9,0],[13,6,9,4,"JSFPSMonitor"],[13,18,9,16],[13,21,9,19],[13,34,9,34],[13,46,9,46],[14,4,10,4],[14,13,10,13,"JSFPSMonitor"],[14,25,10,25,"JSFPSMonitor"],[14,26,10,25],[14,28,10,28],[15,6,11,8],[15,10,11,12,"_this"],[15,15,11,17],[15,18,11,20],[15,22,11,24],[16,6,12,8],[16,10,12,12],[16,11,12,13,"startTime"],[16,20,12,22],[16,23,12,25],[16,24,12,26],[17,6,13,8],[17,10,13,12],[17,11,13,13,"frameCount"],[17,21,13,23],[17,24,13,26],[17,25,13,27],[18,6,14,8],[18,10,14,12],[18,11,14,13,"timeWindow"],[18,21,14,23],[18,24,14,26],[19,8,15,12,"frameCount"],[19,18,15,22],[19,20,15,24],[19,21,15,25],[20,8,16,12,"startTime"],[20,17,16,21],[20,19,16,23],[21,6,17,8],[21,7,17,9],[22,6,18,8],[22,10,18,12],[22,11,18,13,"minFPS"],[22,17,18,19],[22,20,18,22,"Number"],[22,26,18,28],[22,27,18,29,"MAX_SAFE_INTEGER"],[22,43,18,45],[23,6,19,8],[23,10,19,12],[23,11,19,13,"maxFPS"],[23,17,19,19],[23,20,19,22],[23,21,19,23],[24,6,20,8],[24,10,20,12],[24,11,20,13,"averageFPS"],[24,21,20,23],[24,24,20,26],[24,25,20,27],[25,6,21,8],[25,10,21,12],[25,11,21,13,"clearAnimationNumber"],[25,31,21,33],[25,34,21,36],[25,35,21,37],[26,6,22,8],[26,10,22,12],[26,11,22,13,"updateLoopCompute"],[26,28,22,30],[26,31,22,33],[26,43,22,45],[27,8,23,12,"_this"],[27,13,23,17],[27,14,23,18,"frameCount"],[27,24,23,28],[27,26,23,30],[28,8,24,12],[28,12,24,16,"elapsedTime"],[28,23,24,27],[28,26,24,30],[28,27,24,31,"Date"],[28,31,24,35],[28,32,24,36,"now"],[28,35,24,39],[28,36,24,40],[28,37,24,41],[28,40,24,44,"_this"],[28,45,24,49],[28,46,24,50,"startTime"],[28,55,24,59],[28,59,24,63],[28,63,24,67],[29,8,25,12,"_this"],[29,13,25,17],[29,14,25,18,"averageFPS"],[29,24,25,28],[29,27,25,31,"elapsedTime"],[29,38,25,42],[29,41,25,45],[29,42,25,46],[29,45,25,49,"_this"],[29,50,25,54],[29,51,25,55,"frameCount"],[29,61,25,65],[29,64,25,68,"elapsedTime"],[29,75,25,79],[29,78,25,82],[29,79,25,83],[30,8,26,12,"_this"],[30,13,26,17],[30,14,26,18,"timeWindow"],[30,24,26,28],[30,25,26,29,"frameCount"],[30,35,26,39],[30,37,26,41],[31,8,27,12],[31,12,27,16,"timeWindowElapsedTime"],[31,33,27,37],[31,36,27,40],[31,37,27,41,"Date"],[31,41,27,45],[31,42,27,46,"now"],[31,45,27,49],[31,46,27,50],[31,47,27,51],[31,50,27,54,"_this"],[31,55,27,59],[31,56,27,60,"timeWindow"],[31,66,27,70],[31,67,27,71,"startTime"],[31,76,27,80],[31,80,27,84],[31,84,27,88],[32,8,28,12],[32,12,28,16,"timeWindowElapsedTime"],[32,33,28,37],[32,37,28,41],[32,38,28,42],[32,40,28,44],[33,10,29,16],[33,14,29,20,"timeWindowAverageFPS"],[33,34,29,40],[33,37,29,43,"_this"],[33,42,29,48],[33,43,29,49,"timeWindow"],[33,53,29,59],[33,54,29,60,"frameCount"],[33,64,29,70],[33,67,29,73,"timeWindowElapsedTime"],[33,88,29,94],[34,10,30,16,"_this"],[34,15,30,21],[34,16,30,22,"minFPS"],[34,22,30,28],[34,25,30,31,"Math"],[34,29,30,35],[34,30,30,36,"min"],[34,33,30,39],[34,34,30,40,"_this"],[34,39,30,45],[34,40,30,46,"minFPS"],[34,46,30,52],[34,48,30,54,"timeWindowAverageFPS"],[34,68,30,74],[34,69,30,75],[35,10,31,16,"_this"],[35,15,31,21],[35,16,31,22,"maxFPS"],[35,22,31,28],[35,25,31,31,"Math"],[35,29,31,35],[35,30,31,36,"max"],[35,33,31,39],[35,34,31,40,"_this"],[35,39,31,45],[35,40,31,46,"maxFPS"],[35,46,31,52],[35,48,31,54,"timeWindowAverageFPS"],[35,68,31,74],[35,69,31,75],[36,10,32,16,"_this"],[36,15,32,21],[36,16,32,22,"timeWindow"],[36,26,32,32],[36,27,32,33,"frameCount"],[36,37,32,43],[36,40,32,46],[36,41,32,47],[37,10,33,16,"_this"],[37,15,33,21],[37,16,33,22,"timeWindow"],[37,26,33,32],[37,27,33,33,"startTime"],[37,36,33,42],[37,39,33,45,"Date"],[37,43,33,49],[37,44,33,50,"now"],[37,47,33,53],[37,48,33,54],[37,49,33,55],[38,8,34,12],[39,8,35,12,"_this"],[39,13,35,17],[39,14,35,18,"measureLoop"],[39,25,35,29],[39,26,35,30],[39,27,35,31],[40,6,36,8],[40,7,36,9],[41,4,37,4],[42,4,38,4,"JSFPSMonitor"],[42,16,38,16],[42,17,38,17,"prototype"],[42,26,38,26],[42,27,38,27,"measureLoop"],[42,38,38,38],[42,41,38,41],[42,53,38,53],[43,6,39,8],[44,6,40,8],[44,10,40,12],[44,11,40,13,"clearAnimationNumber"],[44,31,40,33],[44,34,40,36,"requestAnimationFrame"],[44,55,40,57],[44,56,40,58],[44,60,40,62],[44,61,40,63,"updateLoopCompute"],[44,78,40,80],[44,79,40,81],[45,4,41,4],[45,5,41,5],[46,4,42,4,"JSFPSMonitor"],[46,16,42,16],[46,17,42,17,"prototype"],[46,26,42,26],[46,27,42,27,"startTracking"],[46,40,42,40],[46,43,42,43],[46,55,42,55],[47,6,43,8],[47,10,43,12],[47,14,43,16],[47,15,43,17,"startTime"],[47,24,43,26],[47,29,43,31],[47,30,43,32],[47,32,43,34],[48,8,44,12],[48,14,44,18],[48,18,44,22,"Error"],[48,23,44,27],[48,24,44,28],[48,93,44,97],[48,94,44,98],[49,6,45,8],[50,6,46,8],[50,10,46,12],[50,11,46,13,"startTime"],[50,20,46,22],[50,23,46,25,"Date"],[50,27,46,29],[50,28,46,30,"now"],[50,31,46,33],[50,32,46,34],[50,33,46,35],[51,6,47,8],[51,10,47,12],[51,11,47,13,"timeWindow"],[51,21,47,23],[51,22,47,24,"startTime"],[51,31,47,33],[51,34,47,36,"Date"],[51,38,47,40],[51,39,47,41,"now"],[51,42,47,44],[51,43,47,45],[51,44,47,46],[52,6,48,8],[52,10,48,12],[52,11,48,13,"measureLoop"],[52,22,48,24],[52,23,48,25],[52,24,48,26],[53,4,49,4],[53,5,49,5],[54,4,50,4,"JSFPSMonitor"],[54,16,50,16],[54,17,50,17,"prototype"],[54,26,50,26],[54,27,50,27,"stopAndGetData"],[54,41,50,41],[54,44,50,44],[54,56,50,56],[55,6,51,8,"cancelAnimationFrame"],[55,26,51,28],[55,27,51,29],[55,31,51,33],[55,32,51,34,"clearAnimationNumber"],[55,52,51,54],[55,53,51,55],[56,6,52,8],[56,10,52,12],[56,14,52,16],[56,15,52,17,"minFPS"],[56,21,52,23],[56,26,52,28,"Number"],[56,32,52,34],[56,33,52,35,"MAX_SAFE_INTEGER"],[56,49,52,51],[56,51,52,53],[57,8,53,12],[57,12,53,16],[57,13,53,17,"minFPS"],[57,19,53,23],[57,22,53,26],[57,26,53,30],[57,27,53,31,"averageFPS"],[57,37,53,41],[58,8,54,12],[58,12,54,16],[58,13,54,17,"maxFPS"],[58,19,54,23],[58,22,54,26],[58,26,54,30],[58,27,54,31,"averageFPS"],[58,37,54,41],[59,6,55,8],[60,6,56,8],[60,13,56,15],[61,8,57,12,"minFPS"],[61,14,57,18],[61,16,57,20],[61,17,57,21],[61,18,57,22],[61,20,57,24,"roundToDecimalPlaces_1"],[61,42,57,46],[61,43,57,47,"roundToDecimalPlaces"],[61,63,57,67],[61,65,57,69],[61,69,57,73],[61,70,57,74,"minFPS"],[61,76,57,80],[61,78,57,82],[61,79,57,83],[61,80,57,84],[62,8,58,12,"maxFPS"],[62,14,58,18],[62,16,58,20],[62,17,58,21],[62,18,58,22],[62,20,58,24,"roundToDecimalPlaces_1"],[62,42,58,46],[62,43,58,47,"roundToDecimalPlaces"],[62,63,58,67],[62,65,58,69],[62,69,58,73],[62,70,58,74,"maxFPS"],[62,76,58,80],[62,78,58,82],[62,79,58,83],[62,80,58,84],[63,8,59,12,"averageFPS"],[63,18,59,22],[63,20,59,24],[63,21,59,25],[63,22,59,26],[63,24,59,28,"roundToDecimalPlaces_1"],[63,46,59,50],[63,47,59,51,"roundToDecimalPlaces"],[63,67,59,71],[63,69,59,73],[63,73,59,77],[63,74,59,78,"averageFPS"],[63,84,59,88],[63,86,59,90],[63,87,59,91],[64,6,60,8],[64,7,60,9],[65,4,61,4],[65,5,61,5],[66,4,62,4],[66,11,62,11,"JSFPSMonitor"],[66,23,62,23],[67,2,63,0],[67,3,63,1],[67,4,63,2],[67,5,63,4],[68,2,64,0,"exports"],[68,9,64,7],[68,10,64,8,"JSFPSMonitor"],[68,22,64,20],[68,25,64,23,"JSFPSMonitor"],[68,37,64,35],[69,0,64,36],[69,3]],"functionMap":{"names":["<global>","<anonymous>","JSFPSMonitor","updateLoopCompute","prototype.measureLoop","prototype.startTracking","prototype.stopAndGetData"],"mappings":"AAA;kCCQ;ICC;iCCY;SDc;KDC;yCGC;KHG;2CIC;KJO;4CKC;KLW;CDE"}},"type":"js/module"}]}