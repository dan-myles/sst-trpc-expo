{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":59,"column":0,"index":1699}}],"key":"7kvm5yrOpz4NYiDi6sn4qxa8DVQ="}},{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":59,"column":0,"index":1699}}],"key":"8I802z/QkQYw0PV6ZCqhBNDwn0Q="}},{"name":"expo-linking","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":40,"index":40}}],"key":"d2mV9A6FUnJJNqqmRiOHU6U9pq4="}},{"name":"expo-router","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":2,"column":0,"index":41},"end":{"line":2,"column":40,"index":81}}],"key":"d+ImM6iykrh7MTG6RsNLtp32WJs="}},{"name":"expo-web-browser","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":3,"column":0,"index":82},"end":{"line":3,"column":44,"index":126}}],"key":"Ot06oUkgQFiP872ToMMNtsaaPu4="}},{"name":"@tanstack/react-query","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":4,"column":0,"index":127},"end":{"line":4,"column":78,"index":205}}],"key":"67ISVYMo1RFOUYqthAT6DxIQ3Aw="}},{"name":"./api","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":6,"column":0,"index":207},"end":{"line":6,"column":29,"index":236}}],"key":"lCizkd2FwisEZQRa6ZHe4NPWmYo="}},{"name":"./base-url","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":7,"column":0,"index":237},"end":{"line":7,"column":40,"index":277}}],"key":"5G1uPYR7kYYJ93JcFMJJnqqYkEg="}},{"name":"./session-store","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":8,"column":0,"index":278},"end":{"line":8,"column":56,"index":334}}],"key":"H34cksdLPwRbcIHWZs2I9HLEKnk="}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.useUser = exports.useSignOut = exports.useSignIn = exports.signIn = void 0;\n  var _asyncToGenerator2 = _interopRequireDefault(require(_dependencyMap[1], \"@babel/runtime/helpers/asyncToGenerator\"));\n  var Linking = _interopRequireWildcard(require(_dependencyMap[2], \"expo-linking\"));\n  var _expoRouter = require(_dependencyMap[3], \"expo-router\");\n  var Browser = _interopRequireWildcard(require(_dependencyMap[4], \"expo-web-browser\"));\n  var _reactQuery = require(_dependencyMap[5], \"@tanstack/react-query\");\n  var _api = require(_dependencyMap[6], \"./api\");\n  var _baseUrl = require(_dependencyMap[7], \"./base-url\");\n  var _sessionStore = require(_dependencyMap[8], \"./session-store\");\n  var _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$();\n  function _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function (e) { return e ? t : r; })(e); }\n  function _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != typeof e && \"function\" != typeof e) return { default: e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && {}.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n.default = e, t && t.set(e, n), n; }\n  var signIn = exports.signIn = /*#__PURE__*/function () {\n    var _ref = (0, _asyncToGenerator2.default)(function* () {\n      var signInUrl = `${(0, _baseUrl.getBaseUrl)()}/api/auth/signin`;\n      var redirectTo = Linking.createURL(\"/login\");\n      var result = yield Browser.openAuthSessionAsync(`${signInUrl}?expo-redirect=${encodeURIComponent(redirectTo)}`, redirectTo);\n      if (result.type !== \"success\") return false;\n      var url = Linking.parse(result.url);\n      var sessionToken = String(url.queryParams?.session_token);\n      if (!sessionToken) throw new Error(\"No session token found\");\n      (0, _sessionStore.setToken)(sessionToken);\n      return true;\n    });\n    return function signIn() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  var useUser = () => {\n    _s();\n    var _useQuery = (0, _reactQuery.useQuery)(_api.trpc.auth.getSession.queryOptions()),\n      session = _useQuery.data;\n    return session?.user ?? null;\n  };\n  exports.useUser = useUser;\n  _s(useUser, \"UI/4hbU9+ttU5fWbRDJnGPnUw0I=\", false, function () {\n    return [_reactQuery.useQuery];\n  });\n  var useSignIn = () => {\n    _s2();\n    var queryClient = (0, _reactQuery.useQueryClient)();\n    var router = (0, _expoRouter.useRouter)();\n    return /*#__PURE__*/(0, _asyncToGenerator2.default)(function* () {\n      var success = yield signIn();\n      if (!success) return;\n      yield queryClient.invalidateQueries(_api.trpc.queryFilter());\n      router.replace(\"/\");\n    });\n  };\n  exports.useSignIn = useSignIn;\n  _s2(useSignIn, \"d0krZWdF+PP8Na30+1G8u8zRm08=\", false, function () {\n    return [_reactQuery.useQueryClient, _expoRouter.useRouter];\n  });\n  var useSignOut = () => {\n    _s3();\n    var queryClient = (0, _reactQuery.useQueryClient)();\n    var signOut = (0, _reactQuery.useMutation)(_api.trpc.auth.signOut.mutationOptions());\n    var router = (0, _expoRouter.useRouter)();\n    return /*#__PURE__*/(0, _asyncToGenerator2.default)(function* () {\n      var res = yield signOut.mutateAsync();\n      if (!res.success) return;\n      yield (0, _sessionStore.deleteToken)();\n      yield queryClient.invalidateQueries(_api.trpc.queryFilter());\n      router.replace(\"/\");\n    });\n  };\n  exports.useSignOut = useSignOut;\n  _s3(useSignOut, \"YRp6TWR0lIcsuxcWa+BvTmczzhY=\", false, function () {\n    return [_reactQuery.useQueryClient, _reactQuery.useMutation, _expoRouter.useRouter];\n  });\n});","lineCount":78,"map":[[8,2,1,0],[8,6,1,0,"Linking"],[8,13,1,0],[8,16,1,0,"_interopRequireWildcard"],[8,39,1,0],[8,40,1,0,"require"],[8,47,1,0],[8,48,1,0,"_dependencyMap"],[8,62,1,0],[9,2,2,0],[9,6,2,0,"_expoRouter"],[9,17,2,0],[9,20,2,0,"require"],[9,27,2,0],[9,28,2,0,"_dependencyMap"],[9,42,2,0],[10,2,3,0],[10,6,3,0,"Browser"],[10,13,3,0],[10,16,3,0,"_interopRequireWildcard"],[10,39,3,0],[10,40,3,0,"require"],[10,47,3,0],[10,48,3,0,"_dependencyMap"],[10,62,3,0],[11,2,4,0],[11,6,4,0,"_reactQuery"],[11,17,4,0],[11,20,4,0,"require"],[11,27,4,0],[11,28,4,0,"_dependencyMap"],[11,42,4,0],[12,2,6,0],[12,6,6,0,"_api"],[12,10,6,0],[12,13,6,0,"require"],[12,20,6,0],[12,21,6,0,"_dependencyMap"],[12,35,6,0],[13,2,7,0],[13,6,7,0,"_baseUrl"],[13,14,7,0],[13,17,7,0,"require"],[13,24,7,0],[13,25,7,0,"_dependencyMap"],[13,39,7,0],[14,2,8,0],[14,6,8,0,"_sessionStore"],[14,19,8,0],[14,22,8,0,"require"],[14,29,8,0],[14,30,8,0,"_dependencyMap"],[14,44,8,0],[15,2,8,56],[15,6,8,56,"_s"],[15,8,8,56],[15,11,8,56,"$RefreshSig$"],[15,23,8,56],[16,4,8,56,"_s2"],[16,7,8,56],[16,10,8,56,"$RefreshSig$"],[16,22,8,56],[17,4,8,56,"_s3"],[17,7,8,56],[17,10,8,56,"$RefreshSig$"],[17,22,8,56],[18,2,8,56],[18,11,8,56,"_getRequireWildcardCache"],[18,36,8,56,"e"],[18,37,8,56],[18,66,8,56,"WeakMap"],[18,73,8,56],[18,92,8,56,"r"],[18,93,8,56],[18,100,8,56,"WeakMap"],[18,107,8,56],[18,111,8,56,"t"],[18,112,8,56],[18,119,8,56,"WeakMap"],[18,126,8,56],[18,138,8,56,"_getRequireWildcardCache"],[18,162,8,56],[18,174,8,56,"_getRequireWildcardCache"],[18,175,8,56,"e"],[18,176,8,56],[18,187,8,56,"e"],[18,188,8,56],[18,191,8,56,"t"],[18,192,8,56],[18,195,8,56,"r"],[18,196,8,56],[18,201,8,56,"e"],[18,202,8,56],[19,2,8,56],[19,11,8,56,"_interopRequireWildcard"],[19,35,8,56,"e"],[19,36,8,56],[19,38,8,56,"r"],[19,39,8,56],[19,48,8,56,"r"],[19,49,8,56],[19,53,8,56,"e"],[19,54,8,56],[19,58,8,56,"e"],[19,59,8,56],[19,60,8,56,"__esModule"],[19,70,8,56],[19,79,8,56,"e"],[19,80,8,56],[19,95,8,56,"e"],[19,96,8,56],[19,119,8,56,"e"],[19,120,8,56],[19,145,8,56,"e"],[19,146,8,56],[19,157,8,56,"default"],[19,164,8,56],[19,166,8,56,"e"],[19,167,8,56],[19,175,8,56,"t"],[19,176,8,56],[19,179,8,56,"_getRequireWildcardCache"],[19,203,8,56],[19,204,8,56,"r"],[19,205,8,56],[19,212,8,56,"t"],[19,213,8,56],[19,217,8,56,"t"],[19,218,8,56],[19,219,8,56,"has"],[19,222,8,56],[19,223,8,56,"e"],[19,224,8,56],[19,234,8,56,"t"],[19,235,8,56],[19,236,8,56,"get"],[19,239,8,56],[19,240,8,56,"e"],[19,241,8,56],[19,248,8,56,"n"],[19,249,8,56],[19,254,8,56,"__proto__"],[19,263,8,56],[19,273,8,56,"a"],[19,274,8,56],[19,277,8,56,"Object"],[19,283,8,56],[19,284,8,56,"defineProperty"],[19,298,8,56],[19,302,8,56,"Object"],[19,308,8,56],[19,309,8,56,"getOwnPropertyDescriptor"],[19,333,8,56],[19,344,8,56,"u"],[19,345,8,56],[19,349,8,56,"e"],[19,350,8,56],[19,370,8,56,"u"],[19,371,8,56],[19,378,8,56,"hasOwnProperty"],[19,392,8,56],[19,393,8,56,"call"],[19,397,8,56],[19,398,8,56,"e"],[19,399,8,56],[19,401,8,56,"u"],[19,402,8,56],[19,411,8,56,"i"],[19,412,8,56],[19,415,8,56,"a"],[19,416,8,56],[19,419,8,56,"Object"],[19,425,8,56],[19,426,8,56,"getOwnPropertyDescriptor"],[19,450,8,56],[19,451,8,56,"e"],[19,452,8,56],[19,454,8,56,"u"],[19,455,8,56],[19,465,8,56,"i"],[19,466,8,56],[19,471,8,56,"i"],[19,472,8,56],[19,473,8,56,"get"],[19,476,8,56],[19,480,8,56,"i"],[19,481,8,56],[19,482,8,56,"set"],[19,485,8,56],[19,489,8,56,"Object"],[19,495,8,56],[19,496,8,56,"defineProperty"],[19,510,8,56],[19,511,8,56,"n"],[19,512,8,56],[19,514,8,56,"u"],[19,515,8,56],[19,517,8,56,"i"],[19,518,8,56],[19,522,8,56,"n"],[19,523,8,56],[19,524,8,56,"u"],[19,525,8,56],[19,529,8,56,"e"],[19,530,8,56],[19,531,8,56,"u"],[19,532,8,56],[19,544,8,56,"n"],[19,545,8,56],[19,546,8,56,"default"],[19,553,8,56],[19,556,8,56,"e"],[19,557,8,56],[19,559,8,56,"t"],[19,560,8,56],[19,564,8,56,"t"],[19,565,8,56],[19,566,8,56,"set"],[19,569,8,56],[19,570,8,56,"e"],[19,571,8,56],[19,573,8,56,"n"],[19,574,8,56],[19,577,8,56,"n"],[19,578,8,56],[20,2,10,7],[20,6,10,13,"signIn"],[20,12,10,19],[20,15,10,19,"exports"],[20,22,10,19],[20,23,10,19,"signIn"],[20,29,10,19],[21,4,10,19],[21,8,10,19,"_ref"],[21,12,10,19],[21,19,10,19,"_asyncToGenerator2"],[21,37,10,19],[21,38,10,19,"default"],[21,45,10,19],[21,47,10,22],[21,60,10,34],[22,6,11,2],[22,10,11,8,"signInUrl"],[22,19,11,17],[22,22,11,20],[22,25,11,23],[22,29,11,23,"getBaseUrl"],[22,48,11,33],[22,50,11,34],[22,51,11,35],[22,69,11,53],[23,6,12,2],[23,10,12,8,"redirectTo"],[23,20,12,18],[23,23,12,21,"Linking"],[23,30,12,28],[23,31,12,29,"createURL"],[23,40,12,38],[23,41,12,39],[23,49,12,47],[23,50,12,48],[24,6,13,2],[24,10,13,8,"result"],[24,16,13,14],[24,25,13,23,"Browser"],[24,32,13,30],[24,33,13,31,"openAuthSessionAsync"],[24,53,13,51],[24,54,14,4],[24,57,14,7,"signInUrl"],[24,66,14,16],[24,84,14,34,"encodeURIComponent"],[24,102,14,52],[24,103,14,53,"redirectTo"],[24,113,14,63],[24,114,14,64],[24,116,14,66],[24,118,15,4,"redirectTo"],[24,128,16,2],[24,129,16,3],[25,6,18,2],[25,10,18,6,"result"],[25,16,18,12],[25,17,18,13,"type"],[25,21,18,17],[25,26,18,22],[25,35,18,31],[25,37,18,33],[25,44,18,40],[25,49,18,45],[26,6,19,2],[26,10,19,8,"url"],[26,13,19,11],[26,16,19,14,"Linking"],[26,23,19,21],[26,24,19,22,"parse"],[26,29,19,27],[26,30,19,28,"result"],[26,36,19,34],[26,37,19,35,"url"],[26,40,19,38],[26,41,19,39],[27,6,20,2],[27,10,20,8,"sessionToken"],[27,22,20,20],[27,25,20,23,"String"],[27,31,20,29],[27,32,20,30,"url"],[27,35,20,33],[27,36,20,34,"queryParams"],[27,47,20,45],[27,49,20,47,"session_token"],[27,62,20,60],[27,63,20,61],[28,6,21,2],[28,10,21,6],[28,11,21,7,"sessionToken"],[28,23,21,19],[28,25,21,21],[28,31,21,27],[28,35,21,31,"Error"],[28,40,21,36],[28,41,21,37],[28,65,21,61],[28,66,21,62],[29,6,23,2],[29,10,23,2,"setToken"],[29,32,23,10],[29,34,23,11,"sessionToken"],[29,46,23,23],[29,47,23,24],[30,6,25,2],[30,13,25,9],[30,17,25,13],[31,4,26,0],[31,5,26,1],[32,4,26,1],[32,20,10,13,"signIn"],[32,26,10,19,"signIn"],[32,27,10,19],[33,6,10,19],[33,13,10,19,"_ref"],[33,17,10,19],[33,18,10,19,"apply"],[33,23,10,19],[33,30,10,19,"arguments"],[33,39,10,19],[34,4,10,19],[35,2,10,19],[35,5,26,1],[36,2,28,7],[36,6,28,13,"useUser"],[36,13,28,20],[36,16,28,23,"useUser"],[36,17,28,23],[36,22,28,29],[37,4,28,29,"_s"],[37,6,28,29],[38,4,29,2],[38,8,29,2,"_useQuery"],[38,17,29,2],[38,20,29,28],[38,24,29,28,"useQuery"],[38,44,29,36],[38,46,29,37,"trpc"],[38,55,29,41],[38,56,29,42,"auth"],[38,60,29,46],[38,61,29,47,"getSession"],[38,71,29,57],[38,72,29,58,"queryOptions"],[38,84,29,70],[38,85,29,71],[38,86,29,72],[38,87,29,73],[39,6,29,16,"session"],[39,13,29,23],[39,16,29,23,"_useQuery"],[39,25,29,23],[39,26,29,10,"data"],[39,30,29,14],[40,4,30,2],[40,11,30,9,"session"],[40,18,30,16],[40,20,30,18,"user"],[40,24,30,22],[40,28,30,26],[40,32,30,30],[41,2,31,0],[41,3,31,1],[42,2,31,2,"exports"],[42,9,31,2],[42,10,31,2,"useUser"],[42,17,31,2],[42,20,31,2,"useUser"],[42,27,31,2],[43,2,31,2,"_s"],[43,4,31,2],[43,5,28,13,"useUser"],[43,12,28,20],[44,4,28,20],[44,12,29,28,"useQuery"],[44,32,29,36],[45,2,29,36],[46,2,33,7],[46,6,33,13,"useSignIn"],[46,15,33,22],[46,18,33,25,"useSignIn"],[46,19,33,25],[46,24,33,31],[47,4,33,31,"_s2"],[47,7,33,31],[48,4,34,2],[48,8,34,8,"queryClient"],[48,19,34,19],[48,22,34,22],[48,26,34,22,"useQueryClient"],[48,52,34,36],[48,54,34,37],[48,55,34,38],[49,4,35,2],[49,8,35,8,"router"],[49,14,35,14],[49,17,35,17],[49,21,35,17,"useRouter"],[49,42,35,26],[49,44,35,27],[49,45,35,28],[50,4,37,2],[50,28,37,2,"_asyncToGenerator2"],[50,46,37,2],[50,47,37,2,"default"],[50,54,37,2],[50,56,37,9],[50,69,37,21],[51,6,38,4],[51,10,38,10,"success"],[51,17,38,17],[51,26,38,26,"signIn"],[51,32,38,32],[51,33,38,33],[51,34,38,34],[52,6,39,4],[52,10,39,8],[52,11,39,9,"success"],[52,18,39,16],[52,20,39,18],[53,6,41,4],[53,12,41,10,"queryClient"],[53,23,41,21],[53,24,41,22,"invalidateQueries"],[53,41,41,39],[53,42,41,40,"trpc"],[53,51,41,44],[53,52,41,45,"queryFilter"],[53,63,41,56],[53,64,41,57],[53,65,41,58],[53,66,41,59],[54,6,42,4,"router"],[54,12,42,10],[54,13,42,11,"replace"],[54,20,42,18],[54,21,42,19],[54,24,42,22],[54,25,42,23],[55,4,43,2],[55,5,43,3],[56,2,44,0],[56,3,44,1],[57,2,44,2,"exports"],[57,9,44,2],[57,10,44,2,"useSignIn"],[57,19,44,2],[57,22,44,2,"useSignIn"],[57,31,44,2],[58,2,44,2,"_s2"],[58,5,44,2],[58,6,33,13,"useSignIn"],[58,15,33,22],[59,4,33,22],[59,12,34,22,"useQueryClient"],[59,38,34,36],[59,40,35,17,"useRouter"],[59,61,35,26],[60,2,35,26],[61,2,46,7],[61,6,46,13,"useSignOut"],[61,16,46,23],[61,19,46,26,"useSignOut"],[61,20,46,26],[61,25,46,32],[62,4,46,32,"_s3"],[62,7,46,32],[63,4,47,2],[63,8,47,8,"queryClient"],[63,19,47,19],[63,22,47,22],[63,26,47,22,"useQueryClient"],[63,52,47,36],[63,54,47,37],[63,55,47,38],[64,4,48,2],[64,8,48,8,"signOut"],[64,15,48,15],[64,18,48,18],[64,22,48,18,"useMutation"],[64,45,48,29],[64,47,48,30,"trpc"],[64,56,48,34],[64,57,48,35,"auth"],[64,61,48,39],[64,62,48,40,"signOut"],[64,69,48,47],[64,70,48,48,"mutationOptions"],[64,85,48,63],[64,86,48,64],[64,87,48,65],[64,88,48,66],[65,4,49,2],[65,8,49,8,"router"],[65,14,49,14],[65,17,49,17],[65,21,49,17,"useRouter"],[65,42,49,26],[65,44,49,27],[65,45,49,28],[66,4,51,2],[66,28,51,2,"_asyncToGenerator2"],[66,46,51,2],[66,47,51,2,"default"],[66,54,51,2],[66,56,51,9],[66,69,51,21],[67,6,52,4],[67,10,52,10,"res"],[67,13,52,13],[67,22,52,22,"signOut"],[67,29,52,29],[67,30,52,30,"mutateAsync"],[67,41,52,41],[67,42,52,42],[67,43,52,43],[68,6,53,4],[68,10,53,8],[68,11,53,9,"res"],[68,14,53,12],[68,15,53,13,"success"],[68,22,53,20],[68,24,53,22],[69,6,54,4],[69,12,54,10],[69,16,54,10,"deleteToken"],[69,41,54,21],[69,43,54,22],[69,44,54,23],[70,6,55,4],[70,12,55,10,"queryClient"],[70,23,55,21],[70,24,55,22,"invalidateQueries"],[70,41,55,39],[70,42,55,40,"trpc"],[70,51,55,44],[70,52,55,45,"queryFilter"],[70,63,55,56],[70,64,55,57],[70,65,55,58],[70,66,55,59],[71,6,56,4,"router"],[71,12,56,10],[71,13,56,11,"replace"],[71,20,56,18],[71,21,56,19],[71,24,56,22],[71,25,56,23],[72,4,57,2],[72,5,57,3],[73,2,58,0],[73,3,58,1],[74,2,58,2,"exports"],[74,9,58,2],[74,10,58,2,"useSignOut"],[74,20,58,2],[74,23,58,2,"useSignOut"],[74,33,58,2],[75,2,58,2,"_s3"],[75,5,58,2],[75,6,46,13,"useSignOut"],[75,16,46,23],[76,4,46,23],[76,12,47,22,"useQueryClient"],[76,38,47,36],[76,40,48,18,"useMutation"],[76,63,48,29],[76,65,49,17,"useRouter"],[76,86,49,26],[77,2,49,26],[78,0,49,26],[78,3]],"functionMap":{"names":["<global>","signIn","useUser","useSignIn","<anonymous>","useSignOut"],"mappings":"AAA;sBCS;CDgB;uBEE;CFG;yBGE;SCI;GDM;CHC;0BKE;SDK;GCM;CLC"}},"type":"js/module"}]}